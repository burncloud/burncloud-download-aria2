# BurnCloud Aria2 Download Manager Documentation

## é¡¹ç›®æ¦‚è¿°

BurnCloud Aria2 Download Manager æ˜¯ä¸€ä¸ªåŸºäº Rust çš„ Aria2 ä¸‹è½½ç®¡ç†å™¨å®ç°ï¼Œä¸º BurnCloud é¡¹ç›®æä¾›ä¸‹è½½åç«¯æ”¯æŒã€‚

## æ ¸å¿ƒç‰¹æ€§

- è‡ªå®šä¹‰ JSON-RPC å®¢æˆ·ç«¯ï¼Œä¸ aria2 è¿›è¡Œé€šä¿¡
- æ”¯æŒ HTTP/HTTPSã€BitTorrentã€Metalink å’Œ Magnet ä¸‹è½½
- æ¯ç§’è½®è¯¢è¿›åº¦æ›´æ–°
- å¤šæ–‡ä»¶ä¸‹è½½èšåˆè¿›åº¦æŠ¥å‘Š
- å®Œæ•´çš„ DownloadManager trait å®ç°
- è‡ªåŠ¨ç«¯å£å†²çªè§£å†³ - ä»ç«¯å£ 6800 å¼€å§‹ï¼Œå¦‚æœè¢«å ç”¨åˆ™è‡ªåŠ¨é€’å¢

## æ¶æ„æ¦‚è§ˆ

é¡¹ç›®é‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼Œä¸»è¦åŒ…å«ä»¥ä¸‹æ¨¡å—ï¼š

### ğŸ”§ æ ¸å¿ƒæ¨¡å—
- **lib.rs** - åº“çš„ä¸»å…¥å£ç‚¹ï¼Œæä¾›å…¬å…± API
- **error.rs** - é”™è¯¯å®šä¹‰å’Œå¤„ç†

### ğŸ“¡ å®¢æˆ·ç«¯æ¨¡å— (client/)
- **mod.rs** - Aria2 JSON-RPC å®¢æˆ·ç«¯å®ç°
- **types.rs** - å®¢æˆ·ç«¯ç›¸å…³çš„æ•°æ®ç±»å‹å®šä¹‰

### ğŸ›ï¸ ç®¡ç†å™¨æ¨¡å— (manager/)
- **mod.rs** - ä¸‹è½½ç®¡ç†å™¨çš„ä¸»è¦å®ç°

### ğŸ”„ è½®è¯¢å™¨æ¨¡å— (poller/)
- **mod.rs** - è¿›åº¦è½®è¯¢å™¨
- **aggregator.rs** - è¿›åº¦èšåˆå™¨

### ğŸš€ å®ˆæŠ¤è¿›ç¨‹æ¨¡å— (daemon/)
- **mod.rs** - å®ˆæŠ¤è¿›ç¨‹æ¨¡å—å®šä¹‰
- **orchestrator.rs** - å®ˆæŠ¤è¿›ç¨‹ä¸»åè°ƒå™¨
- **process.rs** - è¿›ç¨‹ç”Ÿå‘½å‘¨æœŸç®¡ç†
- **monitor.rs** - å¥åº·çŠ¶å†µç›‘æ§
- **binary.rs** - äºŒè¿›åˆ¶æ–‡ä»¶ç®¡ç†
- **platform.rs** - å¹³å°ç›¸å…³æ“ä½œ
- **port_utils.rs** - ç«¯å£å·¥å…·å‡½æ•°

## æ–‡æ¡£ç»“æ„

- [é”™è¯¯å¤„ç†](./error.md) - é”™è¯¯ç±»å‹å’Œå¤„ç†ç­–ç•¥
- [åº“å…¥å£](./lib.md) - ä¸»è¦å…¬å…± API è¯´æ˜
- [å®¢æˆ·ç«¯æ¨¡å—](./client/) - JSON-RPC å®¢æˆ·ç«¯æ–‡æ¡£
- [ç®¡ç†å™¨æ¨¡å—](./manager/) - ä¸‹è½½ç®¡ç†å™¨æ–‡æ¡£
- [è½®è¯¢å™¨æ¨¡å—](./poller/) - è¿›åº¦è½®è¯¢æ–‡æ¡£
- [å®ˆæŠ¤è¿›ç¨‹æ¨¡å—](./daemon/) - å®ˆæŠ¤è¿›ç¨‹æ–‡æ¡£

## å¿«é€Ÿå¼€å§‹

```rust
use burncloud_download_aria2::create_manager_with_auto_port;

#[tokio::main]
async fn main() -> Result<(), Box<dyn std::error::Error>> {
    // åˆ›å»ºä¸‹è½½ç®¡ç†å™¨ï¼Œè‡ªåŠ¨å¤„ç†ç«¯å£å†²çª
    let manager = create_manager_with_auto_port().await?;

    // ç®¡ç†å™¨ç°åœ¨å¯ä»¥ä½¿ç”¨äº†
    Ok(())
}
```

## ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BurnCloud Download Manager                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Public API (lib.rs)                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Manager         â”‚ â”‚ Client      â”‚ â”‚ Daemon              â”‚â”‚
â”‚  â”‚                 â”‚ â”‚             â”‚ â”‚                     â”‚â”‚
â”‚  â”‚ - Task Mapping  â”‚ â”‚ - JSON-RPC  â”‚ â”‚ - Process Mgmt     â”‚â”‚
â”‚  â”‚ - Progress      â”‚ â”‚ - Transport â”‚ â”‚ - Health Monitor   â”‚â”‚
â”‚  â”‚ - State Mgmt    â”‚ â”‚ - Protocol  â”‚ â”‚ - Binary Mgmt      â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚           â”‚                 â”‚                     â”‚         â”‚
â”‚           â”‚                 â”‚                     â”‚         â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                             â”‚                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Poller                  â”‚â”‚â”‚ Platform Utils              â”‚â”‚
â”‚  â”‚                         â”‚â”‚â”‚                             â”‚â”‚
â”‚  â”‚ - Progress Polling      â”‚â”‚â”‚ - Port Management           â”‚â”‚
â”‚  â”‚ - Aggregation          â”‚â”‚â”‚ - File Operations           â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                             â”‚                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                             â–¼                               â”‚
â”‚                    Aria2 Binary Process                     â”‚
â”‚                    (JSON-RPC Server)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```